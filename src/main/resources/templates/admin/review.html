<main class="container mt-3">
    <h3>Danh sách các đánh giá của khách hàng </h3>
    <hr />

    <!-- Tab Content -->

    <i class="error" th:if="${error}" th:text="${error}"></i>
    <!-- Tab: Danh sách -->
    <div class="" id="list">

        <div class="success alert alert-success" th:if="${success}" th:text="${success}"></div>

       

        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th class="text-start">Tên</th>
                        <th class="text-start">Số điện thoại</th>
                        <th class="text-start">Email</th>
                        <th class="text-start">Nội dung đánh giá</th>
                        <th class="text-start">Trạng thái</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <th:block th:if="${#lists.isEmpty(commentPage)}">
                        <tr>
                            <td colspan="7" class="text-center text-muted">
                                <i class="fa fa-info-circle me-1"></i>
                                Không có đánh giá nào
                            </td>
                        </tr>
                    </th:block>
                    <th:block th:each="item : ${commentPage}" th:if="${item != null}">
                        <tr>
                            <td th:text="${item.id}"></td>
                            <td class="text-start" th:text="${item.user.name}"></td>
                            <td class="text-start" th:text="${item.user.sdt}"></td>
                            <td class="text-start" th:text="${item.user.email}"></td>
                            <td class="text-start" th:text="${item.content}"></td>
                            <td>
                                <span th:class="${item.status == 'Active' ? 'badge badge-success' : 'badge badge-danger'}"
                                    style="display:inline-block;min-width:70px;padding:4px 12px;border-radius:12px;font-size:13px;font-weight:600;color:#fff;"
                                    th:text="${item.status == 'Active' ? 'Active' : 'Inactive'}">
                                </span>
                            </td>
                            <td th:if="${item.status == 'Inactive'}">
                                <a  
                                onclick="return confirmReview(this);"
                                th:href="@{/admin/reviews/duyetReview/{id}(id=${item.id}, status=${status}, page=${currentPage})}"
                                    class="btn btn-success">
                                    Duyệt
                                </a>
                            </td>  
                        </tr>
                    </th:block>
                </tbody>
            </table>
        </div>
    <!-- Phân trang chuyên nghiệp -->
    <div class="pagination-wrapper" th:if="${totalElements > 0}">
        <div class="d-flex justify-content-between align-items-center">
            <div class="pagination-info">
                Hiển thị <strong th:text="${#lists.size(commentPage)}"></strong> trong
                tổng số <strong th:text="${totalElements}"></strong> bình luận
            </div>
            <nav aria-label="Review pagination" th:if="${totalPages > 1}">
                <ul class="pagination simple-pagination">
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a class="page-link" th:href="@{/admin/reviews/index(page=0, size=10, status=${status})}"
                            th:unless="${currentPage == 0}" title="Trang đầu">
                            <i class="fas fa-angle-double-left"></i>
                        </a>
                        <span class="page-link" th:if="${currentPage == 0}">
                            <i class="fas fa-angle-double-left"></i>
                        </span>
                    </li>
                    <li class="page-item" th:classappend="${!hasPrevious} ? 'disabled'">
                        <a class="page-link"
                            th:href="@{/admin/reviews/index(page=${currentPage - 1}, size=10, status=${status})}"
                            th:if="${hasPrevious}" title="Trang trước">
                            <i class="fas fa-chevron-left"></i>
                        </a>
                        <span class="page-link" th:unless="${hasPrevious}">
                            <i class="fas fa-chevron-left"></i>
                        </span>
                    </li>
                    <li class="page-item" th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}"
                        th:if="${pageNum >= currentPage - 1 && pageNum <= currentPage + 1}"
                        th:classappend="${pageNum == currentPage} ? 'active'">
                        <a class="page-link" th:href="@{/admin/reviews/index(page=${pageNum}, size=10, status=${status})}"
                            th:text="${pageNum + 1}"></a>
                    </li>
                    <li class="page-item" th:classappend="${!hasNext} ? 'disabled'">
                        <a class="page-link"
                            th:href="@{/admin/reviews/index(page=${currentPage + 1}, size=10, status=${status})}"
                            th:if="${hasNext}" title="Trang sau">
                            <i class="fas fa-chevron-right"></i>
                        </a>
                        <span class="page-link" th:unless="${hasNext}">
                            <i class="fas fa-chevron-right"></i>
                        </span>
                    </li>
                    <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                        <a class="page-link"
                            th:href="@{/admin/reviews/index(page=${totalPages - 1}, size=10, status=${status})}"
                            th:unless="${currentPage == totalPages - 1}" title="Trang cuối">
                            <i class="fas fa-angle-double-right"></i>
                        </a>
                        <span class="page-link" th:if="${currentPage == totalPages - 1}">
                            <i class="fas fa-angle-double-right"></i>
                        </span>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</main>