 <!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Li√™n h·ªá</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <!-- AOS Animate On Scroll -->
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/contact-page.css}" />
    <!-- animate -->
    <!-- Animate.css for smooth entrance (optional but nice) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
  </head>

  <body>
    <div class="container contact-section1 mt-5">
      <!-- ƒê·ªãa ch·ªâ -->
      <div class="box mb-5 text-center" data-aos="fade-up">
        <div class="contact-icon mx-auto">
          <i class="fas fa-map-marker-alt"></i>
        </div>
        <div class="contact-title">ƒê·ªäA CH·ªà</div>
        <div class="contact-info">
          116, Nguy·ªÖn Huy T∆∞·ªüng, H√≤a Minh, Li√™n Chi·ªÉu, ƒê√† N·∫µng.
        </div>
      </div>

      <!-- Fanpage, Hotline, Email -->
      <div class="row text-center mt-3">
        <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="100">
          <div class="box1">
            <div class="contact-icon"><i class="fab fa-facebook-f"></i></div>
            <div class="contact-title">FANPAGE</div>
            <div class="contact-info">fb.com/caycanhmini9xgarden</div>
          </div>
        </div>

        <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="200">
          <div class="box1">
            <div class="contact-icon"><i class="fas fa-phone-alt"></i></div>
            <div class="contact-title">HOTLINE</div>
            <div class="contact-info">0868 60 50 20 - 0905 187 357</div>
          </div>
        </div>

        <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="300">
          <div class="box1">
            <div class="contact-icon"><i class="fas fa-envelope"></i></div>
            <div class="contact-title">E-MAIL</div>
            <div class="contact-info">contact@9xgarden.com</div>
          </div>
        </div>
      </div>

      <!-- Logo + Ti√™u ƒë·ªÅ -->
      <div class="text-center mt-4" data-aos="zoom-in">
        <img th:src="@{/images/2.png}" alt="Logo" style="height: 110px" />
        <div class="logotext">
          <h1>Contact us</h1>
        </div>
      </div>

      <!-- Form -->
      <form
        id="contactForm"
        th:action="@{/sendContact}"
        method="post"
        th:object="${contact}"
        class="form mt-4"
        data-aos="fade-up"
        data-aos-delay="200"
      >
        <input
          required
          type="text"
          th:field="*{name}"
          placeholder="H·ªç v√† t√™n"
          class="form-control mb-3"
        />
        <input
          required
          type="email"
          th:field="*{email}"
          placeholder="Email"
          class="form-control mb-3"
        />
        <input
          type="text"
          th:field="*{sdt}"
          required
          placeholder="S·ªë ƒëi·ªán tho·∫°i"
          class="form-control mb-3"
        />
        <textarea
          required
          th:field="*{message}"
          placeholder="N·ªôi dung"
          class="form-control mb-3"
          rows="4"
        ></textarea>
        <div class="text-center">
          <button type="submit" class="btn btn-hover1">
            <span>G·ª≠i li√™n h·ªá</span>
          </button>
        </div>
      </form>

      <div
        th:if="${successMessage}"
        id="customToastContainer"
        class="toast-container position-fixed top-0 end-0 p-3"
        style="z-index: 9999"
      >
        <div
          id="customToast"
          class="toast text-white bg-success border-0 shadow-lg animate__animated animate__fadeInRight"
          role="alert"
          aria-live="assertive"
          aria-atomic="true"
        >
          <div class="d-flex">
            <div
              class="toast-body fw-semibold fs-6"
              th:utext="${successMessage}"
            ></div>
            <button
              type="button"
              class="btn-close btn-close-white me-2 m-auto"
              data-bs-dismiss="toast"
              aria-label="Close"
            ></button>
          </div>
        </div>
      </div>

      <!-- Google Maps -->
      <div class="mt-5" data-aos="fade-up" data-aos-delay="300">
        <h4 class="text-center mb-3">V·ªã tr√≠ c·ª≠a h√†ng</h4>
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3834.2614279178833!2d108.16720347490369!3d16.05191808462504!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3142191686b4d0a7%3A0x77c8a107ad9ffd37!2zMTE2IE5ndXnhu4VuIEh1eSBUxrDhu59uZywgSG_DoCBBbiwgTGnDqm4gQ2hp4buDdSwgxJDDoCBO4bq1bmcgNTUwMDAwLCBWaeG7h3QgTmFt!5e0!3m2!1svi!2s!4v1751023445019!5m2!1svi!2s"
          width="100%"
          height="450"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </div>
    <div th:insert="~{/fragments/chatbot}"></div>

    <!-- AOS Script -->
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init({
        duration: 800,
        once: true,
      });

      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("contactForm");

        form.addEventListener("submit", function (e) {
          e.preventDefault(); // ch·∫∑n reload

          const formData = new FormData(form);

          fetch(form.action, {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              if (!response.ok) throw new Error("L·ªói g·ª≠i d·ªØ li·ªáu");
              return response.text(); // ho·∫∑c response.json() n·∫øu b·∫°n tr·∫£ JSON
            })
            .then((data) => {
              // ‚úÖ Hi·ªÉn th·ªã toast th√†nh c√¥ng
              showSuccessToast(
                " ‚úÖ C·∫£m ∆°n b·∫°n ƒë√£ g·ª≠i th√¥ng tin ƒë·∫øn ch√∫ng t√¥i <br/>. (Ch√∫ng t√¥i s·∫Ω s·ªõm li√™n h·ªá v·ªõi b·∫°n trong th·ªùi gian s·ªõm nh·∫•t!"
              );
              form.reset(); // Reset form sau khi g·ª≠i
            })
            .catch((error) => {
              console.error("L·ªói:", error);
              showErrorToast(
                "ƒê√£ x·∫£y ra l·ªói khi g·ª≠i li√™n h·ªá. Vui l√≤ng th·ª≠ l·∫°i!"
              );
            });
        });

        function showSuccessToast(message) {
          const toastHtml = `
        <div id="customToast" class="toast align-items-center text-bg-success border-0 show" role="alert" aria-live="assertive" aria-atomic="true" style="min-width: 300px;">
          <div class="d-flex">
            <div class="toast-body">${message}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        </div>
      `;
          showToast(toastHtml);
        }

        function showErrorToast(message) {
          const toastHtml = `
        <div id="customToast" class="toast align-items-center text-bg-danger border-0 show" role="alert" aria-live="assertive" aria-atomic="true" style="min-width: 300px;">
          <div class="d-flex">
            <div class="toast-body">${message}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        </div>
      `;
          showToast(toastHtml);
        }

        function showToast(toastHtml) {
          let container = document.getElementById("customToastContainer");
          if (!container) {
            container = document.createElement("div");
            container.id = "customToastContainer";
            container.className =
              "toast-container position-fixed top-0 end-0 p-3";
            container.style.zIndex = "9999";
            document.body.appendChild(container);
          }

          container.innerHTML = toastHtml;

          const toastElement = container.querySelector(".toast");

          // üëá Add Animate.css class (fadeInRight for v√†o, fadeOutRight for t·∫Øt)
          toastElement.classList.add(
            "animate__animated",
            "animate__fadeInRight"
          );

          const toast = new bootstrap.Toast(toastElement, {
            delay: 6000,
            autohide: true,
          });

          toast.show();

          // üëá Khi toast b·∫Øt ƒë·∫ßu ·∫©n, th√™m hi·ªáu ·ª©ng ra ngo√†i
          toastElement.addEventListener("hide.bs.toast", () => {
            toastElement.classList.remove("animate__fadeInRight");
            toastElement.classList.add("animate__fadeOutRight");
          });
        }
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
